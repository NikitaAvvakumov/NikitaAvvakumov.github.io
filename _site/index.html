<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      Gemfile &middot; I codes and I blogs
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/styles.css">

  <!-- Icons -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="apple-touch-icon" sizes="57x57" href="/public/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/public/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/public/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/public/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/public/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/public/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/public/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/public/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/public/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/public/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/public/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/public/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/public/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/public/manifest.json">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/public/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="Gemfile" href="/atom.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">Gemfile</a>
          &middot;
          <small>I codes and I blogs</small>
        </h3>
      </header>

      <main>
        <div class="posts">
  
    <article class="post">
      <h1 class="post-title">
        <a href="/2015/11/20/2015-11-19-test/">
          Test of LSN Reviews
        </a>
      </h1>

      <time datetime="2015-11-20T16:05:48+02:00" class="post-date">20 Nov 2015</time>

      <p>Lorem ipsum dolor sit amet</p>

<iframe src="http://localhost:3000/products/34?q=embed" frameborder="0" height="350" width="250">    </iframe>



      
      
      

    </article>
  
    <article class="post">
      <h1 class="post-title">
        <a href="/2015/10/31/how-constant-are-your-constants/">
          How constant are your constants?
        </a>
      </h1>

      <time datetime="2015-10-31T00:00:00+02:00" class="post-date">31 Oct 2015</time>

      <p>When an object should not change during the execution of a program, you make it
a constant:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">CONST</span> <span class="o">=</span> <span class="n">some_value</span></code></pre></div>

<p>Good forever, right? Well, not really. More accurately, perhaps, not at all.
First, there is the case of a simple reassignment:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">:</span><span class="mo">001</span> <span class="o">&gt;</span> <span class="no">CONST</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>
 <span class="o">=&gt;</span> <span class="s2">&quot;a&quot;</span>
 <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="no">CONST</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span>
<span class="p">(</span><span class="n">irb</span><span class="p">):</span><span class="mi">2</span><span class="p">:</span> <span class="ss">warning</span><span class="p">:</span> <span class="n">already</span> <span class="n">initialized</span> <span class="n">constant</span> <span class="no">CONST</span>
<span class="p">(</span><span class="n">irb</span><span class="p">):</span><span class="mi">1</span><span class="p">:</span> <span class="ss">warning</span><span class="p">:</span> <span class="n">previous</span> <span class="n">definition</span> <span class="n">of</span> <span class="no">CONST</span> <span class="n">was</span> <span class="n">here</span>
 <span class="o">=&gt;</span> <span class="s2">&quot;b&quot;</span>
 <span class="p">:</span><span class="mo">003</span> <span class="o">&gt;</span> <span class="no">CONST</span>
 <span class="o">=&gt;</span> <span class="s2">&quot;b&quot;</span></code></pre></div>

<p>Ruby issues a warning, but the constant still gets reassigned. This is perhaps
unfortunate, but at least it’s clear what happened. In other cases, the change
of a constant can take place by less obvious means and, to boot, without raising
any warnings.</p>



      
      
      
        <p>
          <a class="btn btn-sm btn-primary" href="/2015/10/31/how-constant-are-your-constants//#read-more" role="button">Read more <i class="fa fa-arrow-circle-right"></i></a>
        </p>
      

    </article>
  
    <article class="post">
      <h1 class="post-title">
        <a href="/2015/08/31/false-security-of-hash-fetch/">
          Don't let Hash#fetch give you a false sense of security
        </a>
      </h1>

      <time datetime="2015-08-31T00:00:00+03:00" class="post-date">31 Aug 2015</time>

      <p>On the face of it, Hash’s <code>fetch</code> instance method is a pretty handy and fail-safe way of
retrieving keys from a hash. It allows one to specify a default value to be
returned if a key does not exist.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">hash</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">:foo</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span> <span class="p">}</span>
<span class="nb">hash</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="ss">:foo</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">)</span>   <span class="c1"># =&gt; &#39;bar&#39;</span>
<span class="nb">hash</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="ss">:baz</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">)</span>   <span class="c1"># =&gt; &#39;default&#39;</span></code></pre></div>



      
      
      
        <p>
          <a class="btn btn-sm btn-primary" href="/2015/08/31/false-security-of-hash-fetch//#read-more" role="button">Read more <i class="fa fa-arrow-circle-right"></i></a>
        </p>
      

    </article>
  
    <article class="post">
      <h1 class="post-title">
        <a href="/2015/06/27/null-object/">
          Empowering Null Objects in a Rails application
        </a>
      </h1>

      <time datetime="2015-06-27T00:00:00+03:00" class="post-date">27 Jun 2015</time>

      <p>Null Object is a well-known software design pattern that allows one to take advantage of
duck-typing encouraged by Ruby. Plenty of articles offer good descriptions of
this pattern and provide basic usage examples, which has prompted me to attempt
integrating it into my Rails apps several times. Unfortunately, null objects
always seemed to fall short of being able to fully replace nil checks and other
conditionals. Luckily, Sandi Metz took a terriffic in-depth look at this pattern
in a <a href="http://confreaks.tv/videos/railsconf2015-nothing-is-something">recent talk</a>.
Inspired by this presentation, I returned to the Null Object pattern and finally
implemented it in a way that unlocks its full potential while leaving the code
base clean and compartmentalized.</p>



      
      
      
        <p>
          <a class="btn btn-sm btn-primary" href="/2015/06/27/null-object//#read-more" role="button">Read more <i class="fa fa-arrow-circle-right"></i></a>
        </p>
      

    </article>
  
    <article class="post">
      <h1 class="post-title">
        <a href="/2015/06/11/selective-stubbing-of-method-calls-in-rspec/">
          Selective stubbing of method calls in RSpec
        </a>
      </h1>

      <time datetime="2015-06-11T00:00:00+03:00" class="post-date">11 Jun 2015</time>

      <p>While building a simple API in Rails, I had the following method in my User model that needed to be tested:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">generate_auth_token!</span>
  <span class="kp">loop</span> <span class="k">do</span>
    <span class="nb">self</span><span class="o">.</span><span class="n">auth_token</span> <span class="o">=</span> <span class="no">Devise</span><span class="o">.</span><span class="n">friendly_token</span>
    <span class="k">break</span> <span class="k">unless</span> <span class="nb">self</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">exists?</span><span class="p">(</span><span class="ss">auth_token</span><span class="p">:</span> <span class="n">auth_token</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></div>

<p>The method uses Devise’s <code>friendly_token</code> method to generate an authentication token for a new user record. After calling the method once, the loop checks whether a user record with the same auth token already exists. If the answer is positive, the method goes for a second try; otherwise it breaks out of the loop, mission accomplished.</p>



      
      
      
        <p>
          <a class="btn btn-sm btn-primary" href="/2015/06/11/selective-stubbing-of-method-calls-in-rspec//#read-more" role="button">Read more <i class="fa fa-arrow-circle-right"></i></a>
        </p>
      

    </article>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>

      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2015-11-20T16:05:55+02:00">2015</time> Nikita Avvakumov.
          Happily made with <a href="http://demo.getpoole.com/">Poole</a>.
        </small>
      </footer>
    </div>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-64562360-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
