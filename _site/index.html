<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      Gemfile &middot; I codes and I blogs
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/styles.css">

  <!-- Icons -->
  <link rel="apple-icon-precomposed" sizes="144x144" href="/public/apple-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="Gemfile" href="/atom.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">Gemfile</a>
          &middot;
          <small>I codes and I blogs</small>
        </h3>
      </header>

      <main>
        <div class="posts">
  
    <article class="post">
      <h1 class="post-title">
        <a href="/2015/06/27/null-object/">
          Empowering Null Objects in a Rails application
        </a>
      </h1>

      <time datetime="2015-06-27T00:00:00+03:00" class="post-date">27 Jun 2015</time>

      <p>Null Object is a well-known software design pattern that allows one to take advantage of
duck-typing encouraged by Ruby. Plenty of articles offer good descriptions of
this pattern and provide basic usage examples, which has prompted me to attempt
integrating it into my Rails apps several times. Unfortunately, null objects
always seemed to fall short of being able to fully replace nil checks and other
conditionals. Luckily, Sandi Metz took a terriffic in-depth look at this pattern
in a <a href="http://confreaks.tv/videos/railsconf2015-nothing-is-something">recent talk</a>.
Inspired by this presentation, I returned to the Null Object pattern and finally
implemented it in a way that unlocks its full potential while leaving the code
base clean and compartmentalized.</p>



      
      
      
        <p>
          <a class="btn btn-sm btn-primary" href="/2015/06/27/null-object//#read-more" role="button">Read more <i class="fa fa-arrow-circle-right"></i></a>
        </p>
      

    </article>
  
    <article class="post">
      <h1 class="post-title">
        <a href="/2015/06/11/selective-stubbing-of-method-calls-in-rspec/">
          Selective stubbing of method calls in RSpec
        </a>
      </h1>

      <time datetime="2015-06-11T00:00:00+03:00" class="post-date">11 Jun 2015</time>

      <p>While building a simple API in Rails, I had the following method in my User model that needed to be tested:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">generate_auth_token!</span>
  <span class="kp">loop</span> <span class="k">do</span>
    <span class="nb">self</span><span class="o">.</span><span class="n">auth_token</span> <span class="o">=</span> <span class="no">Devise</span><span class="o">.</span><span class="n">friendly_token</span>
    <span class="k">break</span> <span class="k">unless</span> <span class="nb">self</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">exists?</span><span class="p">(</span><span class="ss">auth_token</span><span class="p">:</span> <span class="n">auth_token</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></div>

<p>The method uses Devise’s <code>friendly_token</code> method to generate an authentication token for a new user record. After calling the method once, the loop checks whether a user record with the same auth token already exists. If the answer is positive, the method goes for a second try; otherwise it breaks out of the loop, mission accomplished.</p>



      
      
      
        <p>
          <a class="btn btn-sm btn-primary" href="/2015/06/11/selective-stubbing-of-method-calls-in-rspec//#read-more" role="button">Read more <i class="fa fa-arrow-circle-right"></i></a>
        </p>
      

    </article>
  
    <article class="post">
      <h1 class="post-title">
        <a href="/2015/06/11/euro-pound-dollar-yen-ruble/">
          € £ $ ¥ ₽
        </a>
      </h1>

      <time datetime="2015-06-11T00:00:00+03:00" class="post-date">11 Jun 2015</time>

      <p>Thanks to Stack Overflow’s <a href="http://stackoverflow.com/research/developer-survey-2015">annual survey</a>, we now have this gem (pun intended) of data:</p>

<p><a href="http://stackoverflow.com/research/developer-survey-2015#work-complang"><img src="https://gemfile.files.wordpress.com/2015/06/screen-shot-2015-06-11-at-9-38-02-am.png" alt="US compensation" /></a>
<a href="http://stackoverflow.com/research/developer-survey-2015#work-complang"><img src="https://gemfile.files.wordpress.com/2015/06/screen-shot-2015-06-11-at-9-39-20-am.png" alt="Eastern Europe compensation" /></a></p>

<p>Is this as absurd as it appears? Let’s take a closer look.</p>



      
      
      
        <p>
          <a class="btn btn-sm btn-primary" href="/2015/06/11/euro-pound-dollar-yen-ruble//#read-more" role="button">Read more <i class="fa fa-arrow-circle-right"></i></a>
        </p>
      

    </article>
  
    <article class="post">
      <h1 class="post-title">
        <a href="/2015/04/18/git-hooks-ctags-and-rails/">
          git hooks, Ctags & Rails
        </a>
      </h1>

      <time datetime="2015-04-18T00:00:00+03:00" class="post-date">18 Apr 2015</time>

      <p>Small adjustment to Tim Pope’s outstanding <a href="http://tbaggery.com/2011/08/08/effortless-ctags-with-git.html">Effortless Ctags with Git</a>:</p>

<p>To get ctags to also index all bundled gems (including Rails), make the following change to the <code>ctags</code> hook</p>

<p>Replace</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">git ls-files <span class="p">|</span> <span class="se">\</span>
  ctags --tag-relative -L - -f<span class="s2">&quot;$dir/$$.tags&quot;</span> --languages<span class="o">=</span>-javascript,sql</code></pre></div>

<p>with</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">ctags --recurse --tag-relative -f<span class="s2">&quot;$dir/$$.tags&quot;</span> --languages<span class="o">=</span>-javascript,sql <span class="sb">`</span>bundle show --paths<span class="sb">`</span> <span class="sb">`</span>git ls-files<span class="sb">`</span></code></pre></div>

<p>After triggering the hook, the <code>tags</code> file takes a few seconds to generate in the background - have patience :)</p>



      
      
      

    </article>
  
    <article class="post">
      <h1 class="post-title">
        <a href="/2015/02/15/_/">
          _
        </a>
      </h1>

      <time datetime="2015-02-15T00:00:00+02:00" class="post-date">15 Feb 2015</time>

      <p>That nondescript title is not a placeholder - this post is really about the
underscore. It arose out of one of those rewarding moments where you suddenly
feel that there must be a way to do something better, and a search quickly
reveals that, indeed, there is.</p>

<p>Ever evaluate a complex - particularly multi-line - expression in irb or
Rails console and immediately after hitting the
Return key realize that you’ve neglected to assign the return value to a
variable? Suffer no more:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">2</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">001</span> <span class="o">&gt;</span> <span class="o">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="o">]].</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">pair</span><span class="o">|</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span>   <span class="n">pair</span><span class="o">[</span><span class="mi">0</span><span class="o">]*</span><span class="mi">2</span> <span class="o">+</span> <span class="n">pair</span><span class="o">[</span><span class="mi">1</span><span class="o">]*</span><span class="mi">3</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">003</span> <span class="o">&gt;</span> <span class="k">end</span>
<span class="o">=&gt;</span> <span class="o">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">18</span><span class="o">]</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">004</span> <span class="o">&gt;</span> <span class="n">_</span>
<span class="o">=&gt;</span> <span class="o">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">18</span><span class="o">]</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span><span class="mo">005</span> <span class="o">&gt;</span> <span class="n">_</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span> <span class="n">c</span><span class="o">*</span><span class="mi">2</span> <span class="p">}</span>
<span class="o">=&gt;</span> <span class="o">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">36</span><span class="o">]</span></code></pre></div>

<p>See that little line on lines 4 &amp; 5?! Saved by the humble underscore.</p>



      
      
      

    </article>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>

      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2015-06-28T13:22:29+03:00">2015</time> Nikita Avvakumov.
          Happily made with <a href="http://demo.getpoole.com/">Poole</a>.
        </small>
      </footer>
    </div>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-64562360-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
